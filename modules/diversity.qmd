# Diversity metrics {orientation="columns" scrolling="true"}

## {.toolbar}

```{r}
selectInput("higherGeographyDiversity", "Site:", sites_names)
```
## Column

```{r}
cards <- list(
  card("Card 1", full_screen = T,
       class = "button-div clickable-div", id = "clickable-div-1"),
  card("Card 2", full_screen = T,
       class = "button-div clickable-div", id = "clickable-div-2")
)
layout_column_wrap(
      width = "200px", gap = "10px",
      heights_equal = "row",
      !!!cards
    )
```


```{=html}
 <style>
    .button-div {
      cursor: pointer;
      padding: 10px;
      background-color: lightgray;
      text-align: center;
      transition: all 0.3s ease;
      margin: 5px;
    }

    .button-div:hover {
      transform: scale(1.05);
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
    }
    
    .button-div[data-full-screen="true"] {
      transform: none !important;
      box-shadow: none !important;
     cursor: default;
    }

    #sidebar-gallery {
      display: none;
      position: absolute;
      top: 0;
      right: 0;
      width: 250px;
      height: 100%;
      background-color: white;
      box-shadow: -2px 0 5px rgba(0, 0, 0, 0.5);
      padding: 10px;
    }
  </style>
  
  <div id="sidebar-gallery">Sidebar Content</div>
  
  <script>
    document.querySelectorAll('.clickable-div').forEach(function(element) {
      element.addEventListener('click', function() {
        var id = this.id.split('-')[2];
        var sidebar = document.getElementById('sidebar-gallery');
        if (sidebar.style.display === 'none') {
          sidebar.style.display = 'block';
        } else {
          sidebar.style.display = 'none';
        }

        // Send a message to Shiny with the ID of the clicked element
        console.log(id)
        Shiny.onInputChange('buttonClicked', id);
      });
    });
  </script>
```

## Row   {.flow}

<!-- Or a mix of both-->

### {.toolbar}
```{r}

 selectInput("taxonLevel", "Taxonomic rank:", choices = taxonLevels)
 selectInput("alpha_measure", "Alpha diversity:", choices = alpha_measure)
 selectInput("beta_measure", "Beta diversity:", choices = beta_measure)

```

## Row

### Column 

::: {.card title="Alpha diversity: How diverse are the samples in relation to each other?"}

In this figure we show the alpha diversity of every sample, grouped by location name (samples from the same location are considered replicates). The most simple measure of alpha diversity is the number of species/sequences found in each sample. You can check the alpha diversity measure at all different taxonomic levels, or considering all sequences (also unnamed ones). Other measures of alpha diversity take into account also the abundance of different species/sequences.

```{r}

plotOutput("alpha_plot")

```

:::


### Column 


::: {.card title="Beta diversity: How does the diversity compare across samples?"}

Beta-diversity measures, show how close to each other the samples are in terms of species composition. A distance matrix is calculated for each sample, and the distances are plotted. The further the points are from each other, the more different the samples are from each other. Here, you may be able to see that samples from the same location cluster together.

```{r}

plotOutput("beta_plot")

```

:::